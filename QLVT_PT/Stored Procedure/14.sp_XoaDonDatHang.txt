CREATE PROCEDURE sp_XoaDonDatHang
    @MADDH NVARCHAR(8)
AS
BEGIN
    BEGIN TRY  
        BEGIN TRANSACTION;
        DELETE FROM CTDDH WHERE MasoDDH = @MADDH;
        DELETE FROM DatHang WHERE MasoDDH = @MADDH;
        COMMIT TRANSACTION;
    END TRY
    BEGIN CATCH 
        ROLLBACK TRANSACTION;
        -- Trả về thông tin lỗi
        DECLARE @ErrorMessage NVARCHAR(4000) = ERROR_MESSAGE();
        RAISERROR (@ErrorMessage, 16, 1);
    END CATCH
END;
